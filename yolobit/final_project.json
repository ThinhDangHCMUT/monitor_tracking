{"mode":"block","xmlText":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</variable><variable id=\"(F)aR2?[=OEZF:SfGw-g\">temp</variable><variable id=\"i]a1{$X6.+KEp!yX|Xc`\">humid</variable></variables><block type=\"yolobit_events_timer\" id=\"~*A]g72kp`DVy!SSk-b-\" x=\"-1038\" y=\"-663\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"j@fCy|faUv?]`F,~Y/i|\"><field name=\"NUM\">5</field></shadow></value><statement name=\"ACTION\"><block type=\"aiot_dht_measure\" id=\".91i25n`F@B;UmS_grk~\"><next><block type=\"variables_set\" id=\"!3r?p8zZmk;LVu?1?mK@\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\"PyU6}5l6`5R1s_[1PU=J\"><field name=\"DATA\">TEMP</field></block></value><next><block type=\"variables_set\" id=\"gfNgj/v[[!Dt$y]+a7Bm\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">humid</field><value name=\"VALUE\"><block type=\"aiot_dht_read\" id=\"E*ElUZ7RYa,l:,ZMgygs\"><field name=\"DATA\">HUMID</field></block></value><next><block type=\"xbot_serial_write_string\" id=\"pJV6NptP:3]rQW~C;k/}\"><value name=\"string\"><shadow type=\"text\" id=\"Zc9|u}3~q9,w~~UwCdvy\"><field name=\"TEXT\"> </field></shadow><block type=\"text_join\" id=\"{q-eRm[McS0)S3y(.:JX\"><mutation items=\"5\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"NQe~|$D{9d1,~$lo4#//\"><field name=\"TEXT\">!</field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"o;S8}C:au*~o2fykbJ$c\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\".{@I$-!4VD[a5OZcC+:/\"><field name=\"TEXT\">:</field></block></value><value name=\"ADD3\"><block type=\"variables_get\" id=\"dVF]N1n^Hw#k)NyALM15\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">humid</field></block></value><value name=\"ADD4\"><block type=\"text\" id=\"{u#eI*0;7K:Lxv[e=[RT\"><field name=\"TEXT\">#</field></block></value></block></value><next><block type=\"aiot_lcd1602_display\" id=\".[GzI?Cqj!b@YKEDgK7l\"><value name=\"string\"><shadow type=\"text\" id=\"D0v+*qsextQ!hBF.mYYv\"><field name=\"TEXT\">TEMP:</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"7-~tOw]LdA?B%@C~SDfy\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"|?}kR={:1k-b)Z[1_HDH\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"xGH$6_a?#?pr)G4cCsx.\"><value name=\"string\"><shadow type=\"text\" id=\"2(Vvk(ozR#J6;*:aq::6\"><field name=\"TEXT\">Hello</field></shadow><block type=\"variables_get\" id=\"#*ae${rcu;V[1Kkk{%p2\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\"p+/l@VS~*FRV4rPX^SJN\"><field name=\"NUM\">7</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"mQe3=10bl{HG%1,F@o5C\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"QZ0RCFx=B3JMl$j:VB2R\"><value name=\"string\"><shadow type=\"text\" id=\"%JDmlF;s$$o(-{^DcW:n\"><field name=\"TEXT\">HUMID:</field></shadow></value><value name=\"X\"><shadow type=\"math_number\" id=\"Tl.DXC@;F3PrFS$PtAB5\"><field name=\"NUM\">0</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"1%N4r![kr/{u}VyPuE$^\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"aiot_lcd1602_display\" id=\"3[82N/)Gp%I7dOn~s*Az\"><value name=\"string\"><shadow type=\"text\" id=\"?|GHmt8sM19diysXwZhE\"><field name=\"TEXT\">Hello</field></shadow><block type=\"variables_get\" id=\"*fdY4I.GPp$mhzui5Wh)\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">humid</field></block></value><value name=\"X\"><shadow type=\"math_number\" id=\":k:jdb4i8|Z1#E}9Jg6m\"><field name=\"NUM\">7</field></shadow></value><value name=\"Y\"><shadow type=\"math_number\" id=\"HnD_Ng~6_?@7Na6N^M=7\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_events_timer\" id=\"7^3D1G`CIpUZ31)+hL]6\" x=\"-437\" y=\"-688\"><value name=\"INTERVAL\"><shadow type=\"math_number\" id=\"Oo9n6Dd~h-%W[KLtm4R`\"><field name=\"NUM\">0.2</field></shadow></value><statement name=\"ACTION\"><block type=\"variables_set\" id=\"$}~Nz$4SdSUCT!hP*Wy{\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field><value name=\"VALUE\"><block type=\"yolobit_device_read_terminal\" id=\"BzYZbUjUq?qI/|g^7dhW\"></block></value><next><block type=\"controls_if\" id=\"v/I*vSQG,C=BU)tcpGi9\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"?5kl!;@7tuz;dpz$agJ-\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"cj(=MrjOrL-yRh.f0;v$\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"V^GHjX`[OSW;q$}pVd9Q\"><field name=\"TEXT\">a</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"_eRV60u5fSZqe.U=w5Hs\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"t3EO}}Qo=%KEDAY$FN{,\"><field name=\"NUM\">70</field></shadow></value><next><block type=\"aiot_minifan\" id=\"2xVI(fxa~}0h1n2Gg9|M\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\"[^VY^kY0puSUC)^!@[m_\"><field name=\"NUM\">70</field></shadow></value><next><block type=\"aiot_minifan\" id=\"RwX,u~]S0:s;m5RZiaj4\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"0nM}FB}LnG$5nI:^[B9b\"><field name=\"NUM\">70</field></shadow></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"t@umeBEhShUd.2/R(Mon\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"/+~g4*N1C((G[[RaEevC\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"Ly?+rZUj)N4Rz)(gp]Bm\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"CZ7,C9H4gYMukvs!6+:z\"><field name=\"TEXT\">b</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"9SB=8gH^HOOG(n#zfJu7\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"nAncgFO_3mwZ@*OR4Bjp\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_minifan\" id=\"yRO}lxA#CzR)X}colj!,\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\";+Q-u9QI2@wcQP0zR2_5\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"aiot_minifan\" id=\"~GRuy5jqdWZczv`f[7Wd\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"ndXYxk@C[?g3YiAk{FI#\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement><next><block type=\"controls_if\" id=\"|,pq*gQWpoiFf:AWjg)T\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"gO#H1|T:BGU0AMm!u!^t\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"M;zuALc}X5U:{Mdb`7VT\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"V`hbW(oGNT`JTR.mF)s+\"><field name=\"TEXT\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"znC|Dk%VmX~nl;D3MbG:\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"2%qbJobM0/4QBU1p-l~O\"><field name=\"NUM\">70</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"IBqUXsro7]:9$VZg_/|8\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"=uTS0SEV#(fXUUEZBZd|\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"R)EM7BN224kY1n:!@=,|\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"4Mm7=6mk~D?=3`qK$3v3\"><field name=\"TEXT\">1</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\":)D|LiMHFx#@wNwtVoWH\"><field name=\"NAME\">pin10</field><value name=\"percent\"><shadow type=\"math_number\" id=\"$Pyv;L^DN%8ix#F{3Ik)\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"3PlmvCwa`bC71csHLw[a\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"Ji(@eO[hek0`2]f9N*v6\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"52:~nLymXuw[s%P?YG!~\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"I%Fr8*.p,yFkxxI83o(k\"><field name=\"TEXT\">2</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"vay4*uO#z4@Y_FMt=85#\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\"v$Z9Bp=K$]%B%a0t))3/\"><field name=\"NUM\">70</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"/Qv}].$grpf3YBWAS#y{\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"n3QeF,(q1h##^%yrELeD\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"c)xh--g=~9eau./jUpX{\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"ux3:{@OM7v)19.bVoZK5\"><field name=\"TEXT\">3</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"CUHB7O*|6}aI|)=-,eCn\"><field name=\"NAME\">pin14</field><value name=\"percent\"><shadow type=\"math_number\" id=\"wauFq;hvLIcxWt/#:|-0\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"m*E,!Aq4.@3hG|n2wd[Q\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"435FOR|y82)H9W9nE`+|\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\"v*(T5V2S4gSf--Pd_wHp\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"/.Mp=soE7{pT;-u,x9t/\"><field name=\"TEXT\">4</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"X$_;R^Q1x~[Kh%)PSr9D\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"?Bh:F6y4=#G3EVRUPs?F\"><field name=\"NUM\">70</field></shadow></value></block></statement><next><block type=\"controls_if\" id=\"k(T!wl(:Oc_/|S!}TiI:\"><value name=\"IF0\"><block type=\"logic_compare\" id=\"6YY;^CB3hzY1z{Oewq$$\"><field name=\"OP\">EQ</field><value name=\"A\"><block type=\"variables_get\" id=\":I.J9_tIg5=BXn)F~yr.\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field></block></value><value name=\"B\"><block type=\"text\" id=\"~EmA(OqX?c}u)5govGuK\"><field name=\"TEXT\">5</field></block></value></block></value><statement name=\"DO0\"><block type=\"aiot_minifan\" id=\"|F[AIwB*Guy0||sPTp0s\"><field name=\"NAME\">pin1</field><value name=\"percent\"><shadow type=\"math_number\" id=\"]EwP`?OlBD|vDDT%7w%t\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"yolobit_basic_forever\" id=\"w5Bl*-!,Ihc8X2tI)wP*\" x=\"87\" y=\"-688\"><statement name=\"ONSTART\"><block type=\"yolobit_ntp_connect_wifi\" id=\"RE/celxLe[d_48qk=iR0\"><value name=\"WIFI\"><shadow type=\"text\" id=\"JO^i4p)4Yd5qHd/()rN[\"><field name=\"TEXT\">Thinh Dang</field></shadow></value><value name=\"PASSWORD\"><shadow type=\"text\" id=\"@54-t#2XG1!)TS+q/=uw\"><field name=\"TEXT\">123456789</field></shadow></value><next><block type=\"variables_set\" id=\"tCg2l#`0]KG-sOULrn|i\"><field name=\"VAR\" id=\"(F)aR2?[=OEZF:SfGw-g\">temp</field><value name=\"VALUE\"><block type=\"math_number\" id=\"?,T{FqWuiIQMAxl[@C%~\"><field name=\"NUM\">0</field></block></value><next><block type=\"variables_set\" id=\"hi-Ot=UM)p,Dn[xvWD3v\"><field name=\"VAR\" id=\"Vebk(Z-ptd(}@%`?$L8m\">cmd</field><value name=\"VALUE\"><block type=\"text\" id=\"Dg.UHe#Q;ndFZCryDCC,\"><field name=\"TEXT\">0</field></block></value><next><block type=\"variables_set\" id=\"vdla+KAB`t!VX$%v=FUO\"><field name=\"VAR\" id=\"i]a1{$X6.+KEp!yX|Xc`\">humid</field><value name=\"VALUE\"><block type=\"math_number\" id=\"~jdUqx{5w;i:%KG/E@Rt\"><field name=\"NUM\">0</field></block></value><next><block type=\"yolobit_basic_show_image\" id=\"kuWUt?43^bE~wkx8|V9c\"><value name=\"image\"><block type=\"yolobit_basic_image_builtins\" id=\"}!QSG)E5m4/5AGQ|LvYG\"><field name=\"image\">HEART</field></block></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"FOREVER\"><block type=\"yolobit_events_run\" id=\"Yf1cl*}OU!H[n/5@{|TF\"><next><block type=\"yolobit_basic_sleep\" id=\"oJ/Lyym-a6Xy|8P+5dmL\"><value name=\"duration\"><shadow type=\"math_number\" id=\"8$bBmMIRf^W.,hHNs~oQ\"><field name=\"NUM\">1000</field></shadow></value></block></next></block></statement></block></xml>","python":"from event_manager import *\nfrom machine import Pin, SoftI2C\nfrom aiot_dht20 import DHT20\nfrom aiot_lcd1602 import LCD1602\nimport sys\nimport uselect\nfrom yolobit import *\nbutton_a.on_pressed = None\nbutton_b.on_pressed = None\nbutton_a.on_pressed_ab = button_b.on_pressed_ab = -1\nfrom wifi import __wifi__\nimport time\n\nevent_manager.reset()\n\naiot_dht20 = DHT20(SoftI2C(scl=Pin(22), sda=Pin(21)))\n\naiot_lcd1602 = LCD1602()\n\ndef on_event_timer_callback_A_g_k_p_D():\n  global cmd, temp, humid\n  aiot_dht20.read_dht20()\n  temp = aiot_dht20.dht20_temperature()\n  humid = aiot_dht20.dht20_humidity()\n  print((''.join([str(x) for x in ['!', temp, ':', humid, '#']])), end =' ')\n  aiot_lcd1602.move_to(0, 0)\n  aiot_lcd1602.putstr('TEMP:')\n  aiot_lcd1602.move_to(7, 0)\n  aiot_lcd1602.putstr(temp)\n  aiot_lcd1602.move_to(0, 1)\n  aiot_lcd1602.putstr('HUMID:')\n  aiot_lcd1602.move_to(7, 1)\n  aiot_lcd1602.putstr(humid)\n\nevent_manager.add_timer_event(5000, on_event_timer_callback_A_g_k_p_D)\n\ndef read_terminal_input():\n  spoll=uselect.poll()        # Set up an input polling object.\n  spoll.register(sys.stdin, uselect.POLLIN)    # Register polling object.\n\n  input = ''\n  if spoll.poll(0):\n    input = sys.stdin.read(1)\n\n    while spoll.poll(0):\n      input = input + sys.stdin.read(1)\n\n  spoll.unregister(sys.stdin)\n  return input\n\ndef on_event_timer_callback_D_G_C_I_p():\n  global cmd, temp, humid\n  cmd = read_terminal_input()\n  if cmd == 'a':\n    pin10.write_analog(round(translate(70, 0, 100, 0, 1023)))\n    pin14.write_analog(round(translate(70, 0, 100, 0, 1023)))\n    pin1.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if cmd == 'b':\n    pin10.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    pin14.write_analog(round(translate(0, 0, 100, 0, 1023)))\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if cmd == '0':\n    pin10.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if cmd == '1':\n    pin10.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if cmd == '2':\n    pin14.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if cmd == '3':\n    pin14.write_analog(round(translate(0, 0, 100, 0, 1023)))\n  if cmd == '4':\n    pin1.write_analog(round(translate(70, 0, 100, 0, 1023)))\n  if cmd == '5':\n    pin1.write_analog(round(translate(0, 0, 100, 0, 1023)))\n\nevent_manager.add_timer_event(200, on_event_timer_callback_D_G_C_I_p)\n\nif True:\n  __wifi__.connect_wifi('Thinh Dang', '123456789')\n  temp = 0\n  cmd = '0'\n  humid = 0\n  display.show(Image.HEART)\n\nwhile True:\n  event_manager.run()\n  time.sleep_ms(1000)\n","name":"final_project","extensions":[{"id":"yolobit-AITT-VN-yolobit_ntp","src":"https://github.com/AITT-VN/yolobit_ntp","name":"NTP","description":"Mục mở rộng hỗ trợ đọc thời gian từ Internet qua giao thức NTP (Network Time Protocol)"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_aiot","src":"https://github.com/AITT-VN/yolobit_extension_aiot","name":"AIOT Kit","description":"Mục mở rộng dành cho bộ kit AIoT"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"},{"id":"yolobit-AITT-VN-yolobit_extension_events","src":"https://github.com/AITT-VN/yolobit_extension_events","name":"SỰ KIỆN","description":"Mục mở rộng hỗ trợ sử dụng sự kiện trong chương trình"}],"device":"yolobit"}